<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî Demo - Sistema de Notifica√ß√µes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes slideIn {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }

        .notification-card {
            animation: slideIn 0.3s ease-out;
        }

        .pulse-dot {
            animation: pulse 2s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">üîî Sistema de Notifica√ß√µes</h1>
            <p class="text-gray-600">Demo do sistema visual e din√¢mico de notifica√ß√µes do Anamnese Pro</p>
        </div>

        <!-- Controls -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
            <!-- Bot√µes de teste -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">üß™ Testar Notifica√ß√µes</h2>
                <div class="space-y-3">
                    <button onclick="addSuccessNotification()"
                            class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        ‚úÖ Success - Cliente completou
                    </button>
                    <button onclick="addInfoNotification()"
                            class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        ‚ÑπÔ∏è Info - Template configurado
                    </button>
                    <button onclick="addWarningNotification()"
                            class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        ‚ö†Ô∏è Warning - Muitas perguntas
                    </button>
                    <button onclick="addErrorNotification()"
                            class="w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        ‚ùå Error - Falha ao salvar
                    </button>
                </div>
            </div>

            <!-- Controles -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">‚öôÔ∏è Controles</h2>
                <div class="space-y-3">
                    <button onclick="markAllAsRead()"
                            class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        ‚úì‚úì Marcar todas como lidas
                    </button>
                    <button onclick="clearAll()"
                            class="w-full bg-gray-700 hover:bg-gray-800 text-white font-semibold py-3 px-4 rounded-lg transition">
                        üóëÔ∏è Limpar todas
                    </button>
                    <button onclick="addMultiple()"
                            class="w-full bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 px-4 rounded-lg transition">
                        üöÄ Adicionar 5 notifica√ß√µes
                    </button>
                </div>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <p class="text-sm text-blue-800">
                        <strong>Total:</strong> <span id="totalCount">0</span> notifica√ß√µes<br>
                        <strong>N√£o lidas:</strong> <span id="unreadCount">0</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Features -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-900 mb-4">‚ú® Features Implementadas</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 bg-green-50 rounded-lg">
                    <h3 class="font-bold text-green-800 mb-2">üé® Visual</h3>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li>‚Ä¢ Cards animados</li>
                        <li>‚Ä¢ Cores por tipo</li>
                        <li>‚Ä¢ √çcones representativos</li>
                        <li>‚Ä¢ Badge pulsante</li>
                    </ul>
                </div>
                <div class="p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-bold text-blue-800 mb-2">‚ö° Funcional</h3>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li>‚Ä¢ Marcar como lida</li>
                        <li>‚Ä¢ Remover individual</li>
                        <li>‚Ä¢ A√ß√µes em lote</li>
                        <li>‚Ä¢ Timestamp relativo</li>
                    </ul>
                </div>
                <div class="p-4 bg-purple-50 rounded-lg">
                    <h3 class="font-bold text-purple-800 mb-2">üéØ UX</h3>
                    <ul class="text-sm text-purple-700 space-y-1">
                        <li>‚Ä¢ Anima√ß√µes suaves</li>
                        <li>‚Ä¢ Hover effects</li>
                        <li>‚Ä¢ Auto-organiza√ß√£o</li>
                        <li>‚Ä¢ Limite inteligente</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Stack (Fixed Position) -->
    <div id="notificationStack" class="fixed top-20 right-4 w-full max-w-md px-4 z-50">
        <!-- Header -->
        <div id="stackHeader" class="bg-white rounded-xl shadow-lg border-2 border-gray-200 p-3 mb-3 hidden">
            <div class="flex items-center justify-between gap-3">
                <div>
                    <h3 class="font-bold text-gray-900 text-sm">Notifica√ß√µes</h3>
                    <p class="text-xs text-gray-600" id="headerInfo">0 n√£o lidas</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="markAllAsRead()"
                            class="text-xs px-3 py-1 border-2 border-gray-300 rounded-lg hover:bg-gray-50">
                        ‚úì‚úì Ler todas
                    </button>
                    <button onclick="clearAll()"
                            class="text-xs px-3 py-1 border-2 border-gray-300 rounded-lg hover:bg-red-50 hover:text-red-600 hover:border-red-300">
                        üóëÔ∏è Limpar
                    </button>
                </div>
            </div>
        </div>

        <!-- Notifications Container -->
        <div id="notificationsContainer" class="space-y-3"></div>
    </div>

    <script>
        let notifications = [];
        let nextId = 1;

        function updateCounts() {
            const total = notifications.length;
            const unread = notifications.filter(n => !n.isRead).length;

            document.getElementById('totalCount').textContent = total;
            document.getElementById('unreadCount').textContent = unread;
            document.getElementById('headerInfo').textContent =
                unread > 0 ? `${unread} n√£o ${unread === 1 ? 'lida' : 'lidas'}` : 'Todas lidas';

            // Mostrar/esconder header
            const header = document.getElementById('stackHeader');
            if (total > 0) {
                header.classList.remove('hidden');
            } else {
                header.classList.add('hidden');
            }
        }

        function getRelativeTime(timestamp) {
            const now = new Date();
            const past = new Date(timestamp);
            const diffMs = now.getTime() - past.getTime();
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);

            if (diffMins < 1) return 'Agora';
            if (diffMins < 60) return `${diffMins}m atr√°s`;
            if (diffHours < 24) return `${diffHours}h atr√°s`;
            return past.toLocaleDateString('pt-BR');
        }

        function addNotification(type, title, message) {
            const notification = {
                id: nextId++,
                type,
                title,
                message,
                timestamp: new Date().toISOString(),
                isRead: false
            };

            notifications.unshift(notification);
            renderNotifications();
        }

        function markAsRead(id) {
            const notification = notifications.find(n => n.id === id);
            if (notification) {
                notification.isRead = true;
                renderNotifications();
            }
        }

        function markAllAsRead() {
            notifications.forEach(n => n.isRead = true);
            renderNotifications();
        }

        function removeNotification(id) {
            notifications = notifications.filter(n => n.id !== id);
            renderNotifications();
        }

        function clearAll() {
            notifications = [];
            renderNotifications();
        }

        function renderNotifications() {
            const container = document.getElementById('notificationsContainer');
            const maxVisible = 5;
            const visible = notifications.slice(0, maxVisible);

            const colors = {
                success: {
                    bg: 'bg-green-50',
                    border: 'border-green-200',
                    text: 'text-green-800',
                    iconBg: 'bg-green-100',
                    icon: '‚úÖ'
                },
                info: {
                    bg: 'bg-blue-50',
                    border: 'border-blue-200',
                    text: 'text-blue-800',
                    iconBg: 'bg-blue-100',
                    icon: '‚ÑπÔ∏è'
                },
                warning: {
                    bg: 'bg-orange-50',
                    border: 'border-orange-200',
                    text: 'text-orange-800',
                    iconBg: 'bg-orange-100',
                    icon: '‚ö†Ô∏è'
                },
                error: {
                    bg: 'bg-red-50',
                    border: 'border-red-200',
                    text: 'text-red-800',
                    iconBg: 'bg-red-100',
                    icon: '‚ùå'
                }
            };

            container.innerHTML = visible.map(n => {
                const color = colors[n.type];
                return `
                    <div class="notification-card relative p-4 rounded-xl border-2 shadow-lg ${color.bg} ${color.border} ${n.isRead ? 'opacity-60' : 'opacity-100'} hover:shadow-xl hover:scale-105 transition-all cursor-pointer"
                         onclick="markAsRead(${n.id})">
                        ${!n.isRead ? `<div class="absolute -top-1 -right-1 w-3 h-3 bg-pink-500 rounded-full pulse-dot"></div>` : ''}

                        <div class="flex items-start gap-3">
                            <div class="flex-shrink-0 w-10 h-10 rounded-full ${color.iconBg} flex items-center justify-center text-xl">
                                ${color.icon}
                            </div>

                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between gap-2 mb-1">
                                    <h4 class="font-bold text-sm ${color.text}">${n.title}</h4>
                                    <button onclick="event.stopPropagation(); removeNotification(${n.id})"
                                            class="flex-shrink-0 p-1 rounded-lg hover:bg-white/50 transition-colors ${color.text}">
                                        ‚úï
                                    </button>
                                </div>

                                <p class="text-sm ${color.text} opacity-90 mb-2">${n.message}</p>

                                <div class="flex items-center justify-between gap-2">
                                    <span class="text-xs ${color.text} opacity-70">${getRelativeTime(n.timestamp)}</span>
                                    ${!n.isRead ? `
                                        <button onclick="event.stopPropagation(); markAsRead(${n.id})"
                                                class="text-xs font-semibold ${color.text} hover:underline">
                                            Marcar como lida
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>

                        ${n.isRead ? `
                            <div class="absolute bottom-2 right-2 flex items-center gap-1 ${color.text} opacity-50 text-xs">
                                <span>‚úì Lida</span>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');

            // Indicador de mais notifica√ß√µes
            if (notifications.length > maxVisible) {
                container.innerHTML += `
                    <div class="bg-white rounded-xl shadow-lg border-2 border-gray-200 p-3 text-center">
                        <p class="text-sm text-gray-600">+ ${notifications.length - maxVisible} ${notifications.length - maxVisible === 1 ? 'notifica√ß√£o' : 'notifica√ß√µes'}</p>
                    </div>
                `;
            }

            updateCounts();
        }

        // Fun√ß√µes de teste
        function addSuccessNotification() {
            const names = ['Jo√£o Silva', 'Maria Santos', 'Pedro Oliveira', 'Ana Costa'];
            const name = names[Math.floor(Math.random() * names.length)];
            addNotification('success', '‚úÖ Cliente Completou Anamnese', `${name} completou a anamnese remotamente`);
        }

        function addInfoNotification() {
            const templates = ['Anamnese B√°sica', 'Anamnese Detalhada', 'Avalia√ß√£o Completa'];
            const template = templates[Math.floor(Math.random() * templates.length)];
            addNotification('info', '‚öôÔ∏è Novo Template Configurado', `Template "${template}" foi ativado`);
        }

        function addWarningNotification() {
            const count = Math.floor(Math.random() * 10) + 20;
            addNotification('warning', '‚ö†Ô∏è Template com Muitas Perguntas', `Este template tem ${count} perguntas e pode demorar`);
        }

        function addErrorNotification() {
            addNotification('error', '‚ùå Erro ao Salvar', 'N√£o foi poss√≠vel salvar as altera√ß√µes no template');
        }

        function addMultiple() {
            addSuccessNotification();
            setTimeout(() => addInfoNotification(), 200);
            setTimeout(() => addWarningNotification(), 400);
            setTimeout(() => addSuccessNotification(), 600);
            setTimeout(() => addInfoNotification(), 800);
        }

        // Inicializar
        updateCounts();
    </script>
</body>
</html>
